<!DOCTYPE html>
<div class="actions">
<button class="btn primary read-poem" data-title="bow on a breezy day" data-text="today my hair forgets to stay\nso i let the wind dress me.\na ribbon learns my name\nand ties the hours together.\n\nwe write our plans in pencil\nso the clouds can edit.\nwhen the sun blushes pink,\ni promise to show up\nfor the gentle things.">Read poem</button>
<button class="btn copy-link">Copy link</button>
</div>
</div>
</article>

</section>

<footer>
<small>© <span id="y"></span> Eva Tsyura & Kiara Rychen · made with ♡ for CAS</small>
</footer>
</main>

<!-- Modal for images & poems -->
<div class="modal" id="modal" aria-hidden="true" role="dialog" aria-label="Preview">
<div class="modal-box">
<div class="modal-head">
<strong id="modalTitle">Preview</strong>
<button class="close" id="close">Close</button>
</div>
<div class="modal-body" id="modalBody"></div>
</div>
</div>

<button class="to-top" id="toTop" title="Back to top">↑</button>

<script>
// Year
document.getElementById('y').textContent = new Date().getFullYear();

// Modal controls
const modal = document.getElementById('modal');
const modalBody = document.getElementById('modalBody');
const modalTitle = document.getElementById('modalTitle');
const openImage = (src)=>{ modalTitle.textContent='Artwork'; modalBody.innerHTML = `<img src="${src}" alt="">`; modal.classList.add('open'); };
const openPoem = (title, text)=>{ modalTitle.textContent = title; modalBody.innerHTML = `<div class="poem" style="font-family: 'Playfair Display', Georgia, serif; font-size:1.1rem; line-height:1.8; white-space:pre-wrap">${text}</div>`; modal.classList.add('open'); };
document.getElementById('close').onclick = ()=> modal.classList.remove('open');
modal.addEventListener('click', (e)=>{ if(e.target===modal) modal.classList.remove('open'); });

// Bind buttons
document.querySelectorAll('.view-image').forEach(btn=>{
btn.addEventListener('click', ()=> openImage(btn.dataset.src));
});
document.querySelectorAll('.read-poem').forEach(btn=>{
btn.addEventListener('click', ()=> openPoem(btn.dataset.title, btn.dataset.text));
});

// Copy-permalink (dummy: copies current page + anchor by title)
document.querySelectorAll('.copy-link').forEach((btn)=>{
btn.addEventListener('click', ()=>{
const card = btn.closest('.card');
const title = card.querySelector('.title')?.textContent?.trim().toLowerCase().replace(/[^a-z0-9]+/g,'-') || '';
const url = `${location.origin}${location.pathname}#${title}`;
navigator.clipboard.writeText(url).then(()=>{
btn.textContent = 'Copied ✓'; setTimeout(()=> btn.textContent='Copy link', 1200);
});
});
});

// Back to top
const toTop = document.getElementById('toTop');
toTop.addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));
window.addEventListener('scroll', ()=>{
toTop.style.display = window.scrollY > 500 ? 'block' : 'none';
});
</script>
</body>
</html>
